<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Porla | Dashboard</title>

        <link rel="stylesheet" href="/bulma/css/bulma.min.css">
        <link rel="stylesheet" href="/css/main.css">

        <script src="/filesize/lib/filesize.js"></script>
        <script src="/vue/dist/vue.js"></script>
        <script src="/js/app.js"></script>
    </head>

    <body>
        <div id="dash">
            <section class="section">
                <div class="container">
                    <nav class="level">
                        <div class="level-item has-text-centered">
                            <div>
                                <p class="heading">Torrents</p>
                                <p class="title">{{ torrents.length }}</p>
                            </div>
                        </div>

                        <div class="level-item has-text-centered">
                            <div>
                                <p class="heading">DL. speed</p>
                                <p class="title">{{ stats.downloadRate | toSpeed }}</p>
                            </div>
                        </div>

                        <div class="level-item has-text-centered">
                            <div>
                                <p class="heading">UL. speed</p>
                                <p class="title">{{ stats.uploadRate | toSpeed }}</p>
                            </div>
                        </div>
                    </nav>
                </div>
            </section>

            <section class="section" id="torrents">
                <div class="container">
                    <table class="table is-fullwidth is-striped is-hoverable">
                        <thead>
                            <tr>
                                <th>Torrent</th>
                                <th style="width: 120px; text-align: right;">Size</th>
                                <th style="width: 25%;">Progress</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="torrent in torrents" :key="torrent.infoHash">
                                <td>
                                    {{ torrent.name }}<br />
                                    <small>{{ torrent.savePath }}</small>
                                </td>
                                <td style="text-align: right; vertical-align: middle;">
                                    {{ torrent.size | toFileSize }}
                                </td>
                                <td style="vertical-align: middle;">
                                    <progress class="progress is-primary" max="100" :value="Math.ceil(torrent.progress * 100)"></progress>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </body>
</html>
